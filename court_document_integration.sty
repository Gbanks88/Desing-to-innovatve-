\ProvidesPackage{court_document_integration}

% Required packages for form fields and document structure
\RequirePackage{hyperref}
\RequirePackage{xcolor}
\RequirePackage{environ}
\RequirePackage{etoolbox}
\RequirePackage{xparse}

% Define colors for form fields
\definecolor{fieldcolor}{RGB}{240,240,255}
\definecolor{fieldborder}{RGB}{200,200,200}

% Command for creating form fields
\NewDocumentCommand{\courtformfield}{m m}{%
  \TextField[
    name=#1,
    bordercolor=fieldborder,
    backgroundcolor=fieldcolor,
    width=\linewidth,
    height=2em
  ]{#2}
}

% Environment for court document sections
\NewEnviron{courtdocument}[1]{%
  \begin{center}
    \Large\textbf{#1}
  \end{center}
  \BODY
}

% Command for required field markers
\newcommand{\required}{{\color{red}*}}

% Command for creating a date field with current date as default
\newcommand{\datefield}[2]{%
  \TextField[
    name=#1,
    value=\today,
    bordercolor=fieldborder,
    backgroundcolor=fieldcolor,
    width=8em
  ]{#2}
}

% Command for creating a signature field
\newcommand{\signaturefield}[2]{%
  \TextField[
    name=#1,
    bordercolor=fieldborder,
    backgroundcolor=fieldcolor,
    width=0.4\linewidth,
    height=3em
  ]{#2}
}

% Environment for case information section
\NewEnviron{caseinfo}{%
  \begin{center}
    \Large\textbf{Case Information}
  \end{center}
  \begin{tabular}{l l}
    Case Number: & \courtformfield{casenumber}{Enter case number} \\
    Court: & \courtformfield{court}{Enter court name} \\
    Division: & \courtformfield{division}{Enter division} \\
  \end{tabular}
}

% Environment for party information
\NewEnviron{partyinfo}[1]{%
  \begin{tabular}{l l}
    \textbf{#1} & \\
    Name: & \courtformfield{#1name}{Enter name} \\
    Address: & \courtformfield{#1address}{Enter address} \\
    Phone: & \courtformfield{#1phone}{Enter phone} \\
    Email: & \courtformfield{#1email}{Enter email} \\
  \end{tabular}
}

% Command for creating a checkbox field
\newcommand{\checkboxfield}[2]{%
  \CheckBox[
    name=#1,
    bordercolor=fieldborder,
    width=1em,
    height=1em
  ]{#2}
}

% Environment for verification section
\NewEnviron{verification}{%
  \begin{center}
    \Large\textbf{Verification}
  \end{center}
  I declare under penalty of perjury that the foregoing is true and correct.\\[1em]
  Date: \datefield{verificationdate}{Date}\\[1em]
  Signature: \signaturefield{signature}{Sign here}
}
